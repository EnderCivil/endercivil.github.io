<!-- ====== Replace Zone panel with this (inside <main>) ====== -->
<div id="zonePanel" class="ball-panel hidden" aria-hidden="true">
  <h4>Zone Settings</h4>

  <div class="zone-toggle">
    <label for="zoneEnabled">Zone Active</label>
    <input id="zoneEnabled" type="checkbox" checked />
  </div>

  <div class="field-inline"><label>Start Size (%)</label><input id="zoneStart" type="number" min="10" max="200" value="100" /></div>
  <div class="field-inline"><label>Spawn Delay (s)</label><input id="zoneSpawnDelay" type="number" min="0" value="1" /></div>
  <div class="field-inline"><label>Delay before close (s)</label><input id="zoneDelay" type="number" min="0" value="8" /></div>
  <div class="field-inline"><label>Close Duration (s)</label><input id="zoneDuration" type="number" min="1" value="30" /></div>
  <div class="field-inline"><label>Zone DPS</label><input id="zoneDPS" type="number" min="0" value="4" /></div>
  <div class="field-inline"><label>Damage Delay (s)</label><input id="zoneDamageDelay" type="number" min="0" value="0.5" /></div>
</div>

<!-- ====== Add a new Physics panel (skeleton) ====== -->
<div id="physicsPanel" class="ball-panel hidden" aria-hidden="true">
  <h4>Physics</h4>
  <div class="physics-panel">
    <div class="physics-row">
      <label for="physicsSpeedTransfer">Speed transfer on hit</label>
      <input id="physicsSpeedTransfer" type="checkbox" checked />
    </div>
    <div class="physics-row">
      <label for="physicsElasticity">Elastic collisions (0-1)</label>
      <input id="physicsElasticity" type="number" min="0" max="1" step="0.05" value="1" />
    </div>
    <div class="physics-row">
      <label for="physicsFriction">Global friction multiplier</label>
      <input id="physicsFriction" type="number" min="0" max="1" step="0.01" value="1" />
    </div>
  </div>
</div>

<!-- ====== Replace the Weapon Customiser modal contents with this (adds Melee/Ranged + uploads) ====== -->
<div id="weaponModal" class="modal hidden" aria-hidden="true">
  <div class="modal-content weapon-modal-content" style="max-width:920px;">
    <div class="weapon-left">
      <h3>Weapon Customiser</h3>
      <div class="modal-body">
        <div class="weapon-type-row">
          <button id="weaponTypeMelee" class="small">Melee</button>
          <button id="weaponTypeRanged" class="small">Ranged</button>
        </div>

        <!-- common -->
        <div id="weaponCommon">
          <label>Asset (default melee 34.png): <input id="weaponFile" type="file" accept="image/*" /></label>
          <div class="field-inline"><label>Damage</label><input id="weaponDamage" type="number" value="10" /></div>
          <div class="field-inline"><label>Rotation Speed (deg/s)</label><input id="weaponRot" type="number" value="180" /></div>
          <div class="field-inline"><label>Parry Chance (%)</label><input id="weaponParry" type="number" min="0" max="100" value="20" /></div>
          <div class="field-inline"><label>Width</label><input id="weaponWidth" type="number" value="10" /></div>
          <div class="field-inline"><label>Length</label><input id="weaponLength" type="number" value="48" /></div>
        </div>

        <!-- ranged-specific -->
        <div id="weaponRanged" class="hidden">
          <label>Gun asset (default gun): <input id="weaponGunFile" type="file" accept="image/*" /></label>
          <label>Bullet asset (default bullet): <input id="weaponBulletFile" type="file" accept="image/*" /></label>

          <details class="collapsible"><summary>Weapon</summary>
            <div class="field-inline"><label>Lock-On Range</label><input id="weaponLockRange" type="number" value="220" /></div>
            <div class="field-inline"><label>Fire Cooldown (s)</label><input id="weaponFireCooldown" type="number" value="0.7" /></div>
            <div class="field-inline"><label>Magazine Size</label><input id="weaponMagazine" type="number" value="999" /></div>
          </details>

          <details class="collapsible"><summary>Projectile</summary>
            <div class="field-inline"><label>Projectile Speed</label><input id="weaponProjSpeed" type="number" value="420" /></div>
            <div class="field-inline"><label>Projectile Damage</label><input id="weaponProjDmg" type="number" value="12" /></div>
            <div class="field-inline"><label>Homing Range</label><input id="weaponProjHomingRange" type="number" value="0" /></div>
            <div class="field-inline"><label>Homing Turn Speed (deg/s)</label><input id="weaponProjTurn" type="number" value="0" /></div>
          </details>
        </div>

      </div>

      <div class="modal-actions">
        <button id="weaponApply" class="add-btn">Apply</button>
        <button id="weaponCancel" class="small">Cancel</button>
      </div>
    </div>

    <div class="weapon-right">
      <h4>Preview</h4>
      <div id="weaponPreview" class="weapon-preview">
        <canvas id="weaponCanvas" width="260" height="260"></canvas>
      </div>
    </div>
  </div>
</div>
